# --------------------------
# ORACLE â†’ SOLACE CDC CONNECTOR
# --------------------------

spring:
  cloud:
    stream:
      bindings:
        input-0:
          binder: cdcsupplier
        output-0:
          destination: oracle/cdc/fallback
          binder: solace
solace:
  connector:
    workflows:
      0:
        enabled: true
  java:
    host: ${SOLACE_HOST:tcp://localhost:55555}
    msg-vpn: ${SOLACE_VPN:default}
    client-username: ${SOLACE_USERNAME:default}
    client-password: ${SOLACE_PASSWORD:default}

management:
  metrics:
    export:
      simple:
        enabled: true
  endpoints:
    web:
      exposure:
        include: "health,metrics,loggers,logfile,channels,env,workflows,leaderelection,bindings"

logging:
  level:
    root: INFO
    com.solace.connectors.debezium: INFO
    com.solace.connector.core: INFO
    com.solace.spring.cloud.stream.binder: INFO
cdc:
  stream:
    retryDelayOnException: 2000 #milliseconds to wait before next retry
    retriesOnException: 3
    failIfDynamicDestinationMismatch: true # true -> will stop the connector in case of wrong column name configuration in dynamic destination, false -> fallback to default destination if configured dynamicDestination fails due to wrong column name configuration
    dynamicDestination:  "*:oracle/{tablename}/{operation}"
  schema: false
  flattening:
    enabled: false
debezium:
  properties:
    # max:
    #   batch:
    #     size: 1
    #   queue:
    #     size: 3
    include:
      schema:
        changes: false
    topic:
      prefix: "solace_cdc"
    decimal:
      handling:
        mode: string
    database:
      connection:
        adapter: logminer
      oracle:
        version: 12+
      user: "C##DEBEZIUM"
      server:
        id: hibankcdc
        name: hibankcdcd1
      password: debezium123
      dbname: FREE
      pdb.name: FREEPDB1
      port: 1521
      hostname: oracle-free
      allowPublicKeyRetrieval: 'true'
    table:
      include:
        list: customers
    connector:
      class: io.debezium.connector.oracle.OracleConnector
    name: oracle-connector
